<?php

/**
 * AUTHOR:  Richard Bohac [rici.bohac@gmail.com]
 * DATE:    2021-10-13
 */

//------------------------------------------------------REQUIRES--------------------------------------------------------
require_once 'AFileReader.php';
//---------------------------------------------------REQUIRES - END-----------------------------------------------------

/**
 * Text file reader utilizing filesystem function (fopen, fclose, ftell...).
 * WARNING: May be problematic for files larger than 2GB.
 */
final class TxtFileReader extends AFileReader {
    //----------------------------------------------------CONSTANTS-----------------------------------------------------
    //-------------------------------------------------CONSTANTS - END--------------------------------------------------

    //----------------------------------------------------VARIABLES-----------------------------------------------------
    //-------------------------------------------------VARIABLES - END--------------------------------------------------

    //--------------------------------------------------CONSTRUCTORS----------------------------------------------------
    //-----------------------------------------------CONSTRUCTORS - END-------------------------------------------------

    //------------------------------------------------PRIVATE FUNCTIONS-------------------------------------------------
    //---------------------------------------------PRIVATE FUNCTIONS - END----------------------------------------------

    //-----------------------------------------------PROTECTED FUNCTIONS------------------------------------------------
    //--------------------------------------------PROTECTED FUNCTIONS - END---------------------------------------------

    //------------------------------------------------PUBLIC FUNCTIONS--------------------------------------------------
    /**
     * Reads one line from the opened file.
     *
     * @return  string|null     Null on end, or non-opened handler. The line read in string form.
     */
    public function readLine() : ?string {
        if ($this->t_handler === null) {
            return null;
        }

        $result = fgets($this->t_handler);
        if ($result === false) {
            return null;
        }

        return $result;
    }
    //---------------------------------------------PUBLIC FUNCTIONS - END-----------------------------------------------
}

?>
